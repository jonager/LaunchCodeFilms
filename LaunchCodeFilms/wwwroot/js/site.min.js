"use strict";function getPopularMovies(){$.ajax({url:"/Helper/GetPopularMovies",success:function(n){return n},error:function(){console.log("Error!!!")}})}function getPerson(n){$.ajax({url:"/Helper/GetPerson?person_id="+n,success:function(n){console.log(n)}})}function search(n){$.ajax({url:"/Helper/Search?searchTerm="+n,success:function(n){console.log(n);let i=n.results,r=$(".search-link"),u=$(".search-img"),f=$(".search-name");for(var t=0;t<i.length;t++)console.log(i[t].id),$(".row-search").append(`<div class="col-3 mb-3">
                            <a class="search-link" href="/Movie?id=${i[t].id}">
                                <div class="card">
                                    <img class="card-img-top search-img" src="https://image.tmdb.org/t/p/w342${i[t].poster_path}" alt="actor picture">
                                    <div class="card-body">
                                        <p class="card-title search-name text-center">${i[t].title}</p>
                                        <p class = "card-subtitle"></p>
                                    </div>
                                </div>
                            </a>
                       </div>`)}})}function heroCarousel(){$.ajax({url:"/Helper/GetPopularMovies",success:function(n){let i=n.results.slice(0,3),r=$(".movie-title"),u=$(".img-fluid"),f=$(".hero-movie"),e=$('[data-id=""]');for(var t=0;t<i.length;t++)u[t].setAttribute("src","https://image.tmdb.org/t/p/w1280"+i[t].backdrop_path),r[t].innerHTML=i[t].original_title,f[t].setAttribute("href","/Movie?id="+i[t].id),e[t].setAttribute("data-id",i[t].id)}})}function currentPopular(){$.ajax({url:"/Helper/GetPopularMovies",success:function(n){let i=n.results.slice(3,6),u=$(".poptitle"),f=$(".popimg"),e=$(".poptext"),r=$(".pop");console.log(r);console.log(i);for(var t=0;t<i.length;t++)if(f[t].setAttribute("src","https://image.tmdb.org/t/p/w342"+i[t].poster_path),u[t].innerHTML=i[t].original_title,r[t].setAttribute("href","/Movie?id="+i[t].id),console.log(r[t]),i[t].overview.length>90){e[t].innerHTML=i[t].overview.slice(0,90)+"  . . .";continue}}})}function upcomingMovies(){$.ajax({url:"/Helper/GetUpcomingMovies",success:function(n){let i=n.results.slice(0,3),u=$(".uptitle"),f=$(".upimg"),r=$(".uptext"),e=$(".up");for(var t=0;t<i.length;t++){if(f[t].setAttribute("src","https://image.tmdb.org/t/p/w342"+i[t].poster_path),u[t].innerHTML=i[t].original_title,e[t].setAttribute("href","/Movie?id="+i[t].id),i[t].overview.length>90){r[t].innerHTML=i[t].overview.slice(0,90)+"  . . .";continue}r[t].innerHTML=i[t].overview}}})}function heroMovie(n){$.ajax({url:"/Helper/GetMovie?movie_idapi="+n,success:function(n){console.log(n);let o="https://image.tmdb.org/t/p/w500"+n.poster_path,s="https://image.tmdb.org/t/p/w1280"+n.backdrop_path,h=$(".hero-poster"),c=$(".hero-title"),l=$(".hero-director"),a=$(".overview"),v=$(".hero-cast"),t="",i=n.credits.crew,f=n.credits.cast.slice(0,5),r=$(".heroSection"),y=$('[href = "/Movie/Comments"]');y.attr("href",`/Movie/Comments?id=${n.id}`);let p=$('[href = "/Movie/Reviews"]');p.attr("href",`/Movie/Reviews?id=${n.id}`);let e=$('[data-id=""]');for(var u=0;u<e.length;u++)e[u].setAttribute("data-id",n.id);for(let n=0;n<i.length;n++)if(i[n].job==="Director"){l.text(i[n].name);break}for(let n=0;n<f.length;n++)t+=f[n].name+", ";r.css("background",`url(${s}) no-repeat`);r.css("background-size","cover");r.css("background-attachment","fixed");h.attr("src",o);c.text(n.original_title);v.text(t.slice(0,t.length-2)+".");a.text(n.overview)}})}function castSection(n){$.ajax({url:"/Helper/GetMovie?movie_idapi="+n,success:function(n){let i=$(".profile-img"),r=$(".actor-name"),u=$(".char-name"),f=$(".actor-profile"),e="https://image.tmdb.org/t/p/w1280",t=n.credits.cast.slice(0,5),o=n.crew;for(let n=0;n<t.length;n++)i[n].setAttribute("src",e+t[n].profile_path),r[n].innerHTML=t[n].name,u[n].innerHTML=t[n].character,f[n].setAttribute("href","/Person?id="+t[n].id)}})}function similarSection(n){$.ajax({url:"/Helper/SimilarMovies?movie_idapi="+n,success:function(n){let i=$(".similar-link"),r=$(".similar-img"),u=$(".similar-name"),f="https://image.tmdb.org/t/p/w342",t=n.results.slice(0,5);for(let n=0;n<t.length;n++)r[n].setAttribute("src",f+t[n].poster_path),u[n].innerHTML=t[n].title,i[n].setAttribute("href","/Movie?id="+t[n].id)}})}function addReviewQuery(n){let t=$('[href = "/Movie/AddReview"]');t.attr("href",`/Movie/AddReview?id=${n}`)}function getReviews(n){$.ajax({url:"/Helper/GetReviews?movie_idapi="+n,success:function(n){let i=$(".review-list");if(console.log(n),console.log(n.Description),n==1)i.append(`<div class="card">
                        <div class="card-body">
                            No reviews yet.
                        </div>
                    </div>`);else for(var t=0;t<n.length;t++)i.append(`<div class="card p-2 mt-5 m-3"> 
                            <div class="card-body">
                                <h4 class="card-title">Reviewed by ${n[t].User.UserName}</h4>
                                <p class="card-text">${n[t].Description}</p>
                            </div>
                        </div>`)}})}function setRating(n){let i=$(n).data("userid"),t=$(n).data("id"),r=$(n).data("rating");console.log(t);$.ajax({url:`/Helper/SetRating?user_id=${i}&id=${t}&rating=${r}`})}function setDescription(n){let t=$(n).data("userid"),i=$(n).data("id"),r=$(n).data("description");$.ajax({url:`/Helper/SetDescription?user_id=${t}&movie_id=${i}&description=${r}`})}function addToWatchlist(n){let t=$(n).data("userid"),i=$(n).data("id");$.ajax({url:`/Helper/AddToWatchlist?user_id=${t}&movie_idapi=${i}`})}function addToFavorite(n){let t=$(n).data("userid"),i=$(n).data("id");$.ajax({url:`/Helper/AddToFavorite?user_id=${t}&movie_idapi=${i}`})}function addToWatched(n){let t=$(n).data("userid"),i=$(n).data("id");$.ajax({url:`/Helper/AddToWatched?user_id=${t}&movie_idapi=${i}`})}function addToNotify(n){let t=$(n).data("userid"),i=$(n).data("id");$.ajax({url:`/Helper/AddToNotify?user_id=${t}&movie_idapi=${i}`})}$(document).ready(function(){$("form#search-term").on("submit",function(n){n.preventDefault();let t={};t.searchTerm=$("#q").val();window.location.href="https://localhost:44383/Movie/Search?query="+t.searchTerm});$(".hero-carousel").length&&heroCarousel();$(".popular-list").length&&currentPopular();$(".upcoming-list").length&&upcomingMovies();$.urlParam=function(n){var t=new RegExp("[?&]"+n+"=([^&#]*)").exec(window.location.href);return t===null?null:decodeURI(t[1])||0};$(".heroSection").length&&(heroMovie($.urlParam("id")),castSection($.urlParam("id")),similarSection($.urlParam("id")));$.urlParam("query")&&search($.urlParam("query"));$(".reviews").length&&(addReviewQuery($.urlParam("id")),getReviews($.urlParam("id")));$("a.no_click").click(function(n){n.preventDefault()});$('[data-toggle="popover"]').popover();$('[data-toggle="tooltip"]').tooltip()});